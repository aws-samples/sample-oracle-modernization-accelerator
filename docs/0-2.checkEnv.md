---
layout: page
title: 0-2. 환경 설정 확인
nav_order: 2
parent: 환경 설정
description: "현재 환경 변수 확인"
---

# 0-2. 현재 환경 변수 확인 메뉴 상세 분석

## 메뉴명
**2. 현재 환경 변수 확인 (checkEnv.sh)**

## 목적
현재 설정된 환경 변수 상태를 확인하고 검증하여 OMA 작업 수행에 필요한 모든 환경 변수가 올바르게 설정되었는지 점검

## 실행 흐름
```
initOMA.sh 
  → show_environment_menu() 
    → execute_checkenv() 
      → $OMA_BASE_DIR/bin/checkEnv.sh
```

## 상세 분석

### 1. **execute_checkenv() 함수**
```bash
# 위치: initOMA.sh (187-194행)
# 실행파일: $OMA_BASE_DIR/bin/checkEnv.sh
```

### 2. **checkEnv.sh (환경 변수 확인 스크립트)**
```bash
# 위치: $OMA_BASE_DIR/bin/checkEnv.sh
# 주요 기능: 현재 설정된 환경 변수 상태 확인 및 검증
```

### 3. **주요 환경변수 매핑**
```bash
# 기본 경로 설정
OMA_BASE_DIR               # OMA 프로젝트 루트 디렉토리

# 환경 변수 파일 패턴
ENV_FILE_PATTERN           # oma_env_*.sh 패턴으로 환경 변수 파일 검색
```

### 4. **환경 변수 확인 작업**

#### **4.1 환경 변수 파일 자동 로드**
```bash
# 패턴: oma_env_*.sh
# 가장 최근 파일 자동 선택 및 로드
```

#### **4.2 필수 환경 변수 검증**
- **프로젝트 기본 정보**: `APPLICATION_NAME` 등
- **경로 설정**: 각종 폴더 경로 존재 여부 확인
- **데이터베이스 연결**: 연결 정보 유효성 확인
- **도구 경로**: 필요한 스크립트 및 도구 파일 존재 확인

#### **4.3 환경 변수 상태 리포트**
- **설정 완료**: ✓ 표시로 정상 설정된 변수 표시
- **설정 누락**: ✗ 표시로 누락된 변수 표시
- **경고 사항**: 설정되었지만 주의가 필요한 항목 표시

## 결과 출력

### **환경 변수 상태 리포트**
```bash
# 콘솔 출력 형태:
=== OMA 환경 변수 확인 ===
✓ APPLICATION_NAME: itsm-2nd
✓ JAVA_SOURCE_FOLDER: /path/to/source (존재함)
✓ ORACLE_HOST: oracle.host.com (연결 가능)
✗ PGHOST: 설정되지 않음
⚠ APP_TOOLS_FOLDER: 경로 존재하지만 일부 파일 누락
```

### **검증 항목**
- **환경 변수 존재 여부**: 필수 환경 변수가 설정되어 있는지 확인
- **경로 유효성**: 설정된 경로가 실제로 존재하는지 확인
- **파일 존재성**: 필요한 파일들이 지정된 경로에 존재하는지 확인
- **권한 확인**: 파일 및 디렉토리 접근 권한 확인

## 환경 변수 의존성

### **필수 환경변수**
- **기본 경로**: `OMA_BASE_DIR`
- **프로젝트 정보**: `APPLICATION_NAME`

### **검증 대상 환경변수**
- **애플리케이션**: `APPLICATION_FOLDER`, `JAVA_SOURCE_FOLDER`, `SOURCE_SQL_MAPPER_FOLDER`
- **데이터베이스**: `ORACLE_*`, `PG*`, `SOURCE_DBMS_TYPE`, `TARGET_DBMS_TYPE`
- **도구 경로**: `APP_TOOLS_FOLDER`, `APP_LOGS_FOLDER`

## 사전 조건

### **환경 변수 파일 존재**
- `oma_env_*.sh` 패턴의 환경 변수 파일이 존재해야 함
- 또는 현재 셸에 환경 변수가 이미 로드되어 있어야 함

### **기본 디렉토리 구조**
- OMA 프로젝트 기본 디렉토리 구조가 구성되어 있어야 함

## 다음 단계
환경 변수 확인 결과에 따라:
- **정상**: 모든 OMA 기능 사용 가능
- **문제 발견**: 0-1. 환경 설정 수행을 통해 재설정 필요

## 주요 특징
- **자동 로드**: 환경 변수 파일 자동 검색 및 로드
- **포괄적 검증**: 환경 변수 존재뿐만 아니라 경로 유효성까지 확인
- **직관적 표시**: ✓, ✗, ⚠ 기호로 상태를 명확히 표시
- **문제 진단**: 문제가 있는 항목에 대한 구체적인 정보 제공
