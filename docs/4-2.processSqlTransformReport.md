---
layout: default
title: 4-2. 최종 리포트 생성
nav_order: 2
parent: 결과 통합
description: "변환 작업 종합 보고서 작성"
---

# 4-2. 변환 작업 보고서 메뉴 상세 분석

## 메뉴명
**변환 작업 보고서**

## 목적
MyBatis Oracle SQL을 Target DBMS로 변환한 결과를 종합적으로 분석하고 HTML 형태의 상세 보고서를 생성합니다. 변환 성공률, 파일별 현황, SQLID별 변환 상태 등을 시각적으로 제공합니다.

## 실행 흐름
```
initOMA.sh 
  → execute_transform_report() 
    → processSqlTransformReport.sh
      → q chat --trust-all-tools --no-interactive < sqlTransformReport.md
```

## 상세 분석

### 1. **execute_transform_report() 함수**
```bash
# 위치: initOMA.sh (531행)
# 실행파일: $OMA_BASE_DIR/bin/processSqlTransformReport.sh
```

### 2. **processSqlTransformReport.sh (핵심 실행 스크립트)**
```bash
# 위치: $OMA_BASE_DIR/bin/processSqlTransformReport.sh
# 주요 기능: Amazon Q Chat을 통한 SQL 변환 결과 보고서 생성
# 실행명령: q chat --trust-all-tools --no-interactive < $APP_TOOLS_FOLDER/sqlTransformReport.md
```

### 3. **sqlTransformReport.md (보고서 생성 프롬프트)**
```bash
# 위치: $APP_TOOLS_FOLDER/sqlTransformReport.md
# 주요 기능: Amazon Q Chat에게 보고서 생성을 지시하는 프롬프트 파일
# 실행방식: Amazon Q Chat 입력으로 사용
```

### 4. **주요 환경변수 매핑**
```bash
# 입력 관련 환경변수
APP_TRANSFORM_FOLDER            # SQL 변환 작업 디렉토리 (SQLTransformTarget.csv 위치)
SOURCE_SQL_MAPPER_FOLDER        # 원본 MyBatis XML 파일 디렉토리
TARGET_SQL_MAPPER_FOLDER        # 변환된 MyBatis XML 파일 디렉토리
TARGET_DBMS_TYPE               # 대상 DBMS 타입 (postgres/mysql)

# 출력 관련 환경변수  
APP_TRANSFORM_FOLDER/../        # HTML 보고서 저장 디렉토리

# 기타 설정 환경변수
APP_TOOLS_FOLDER               # 애플리케이션 도구 디렉토리
APPLICATION_NAME               # 프로젝트명
```

### 5. **작업 단계**
#### **5.1 데이터 수집 및 분석**
- SQLTransformTarget.csv에서 Transform Target='Y'인 모든 XML 파일들의 SQLID 통계 정보 파악
- TARGET_SQL_MAPPER_FOLDER에서 매칭되는 XML 파일들의 SQLID 통계 정보 파악
- DBMS별 변환 규칙 참조 (PostgreSQL/MySQL)

#### **5.2 HTML 보고서 생성**
- Transform 개요 카드 형태 정보 생성
- Process 상태별 현황 카드 생성
- XML 변환 현황표 생성
- SQLID 변환 현황표 생성

## 결과 파일

### **HTML 보고서**
```bash
# 출력 경로: $APP_TRANSFORM_FOLDER/../

1. SQL_Transform_Report.html    # 종합 변환 결과 보고서
2. 관련 차트 및 이미지 파일들    # 보고서에 포함된 시각화 자료들
```

### **보고서 구성 요소**
```bash
# Transform 개요 (5개 카드)
- 총 XML 파일 수 (Transform Target='Y')
- 매칭되는 Target XML 파일 수
- Source 총 SQLID 수
- Target 총 SQLID 수
- 전체 변환 성공률

# Process 상태별 현황 (카드)
- Completed: 완료된 파일 수
- Sampled: 샘플링된 파일 수
- Not yet: 미처리 파일 수
- Failed: 실패한 파일 수
- 기타: 기타 상태 파일 수

# XML 변환 현황표 (테이블)
- 파일명, Process 상태, Source/Target SQLID 수, 변환율

# SQLID 변환 현황표 (테이블)
- XML별 Source/Target 경로, SQLID 수, 변환 상태
```

## 환경 변수 의존성

### **필수 환경변수**
- **파일 경로**: `APP_TRANSFORM_FOLDER`, `SOURCE_SQL_MAPPER_FOLDER`, `TARGET_SQL_MAPPER_FOLDER`
- **도구 경로**: `APP_TOOLS_FOLDER`, `OMA_BASE_DIR`
- **DBMS 설정**: `TARGET_DBMS_TYPE`

### **선택적 환경변수**
- **프로젝트 정보**: `APPLICATION_NAME`

## 사전 조건
- SQL 변환 작업(2-1번 메뉴)이 완료되어 있어야 함
- SQLTransformTarget.csv 파일이 존재해야 함
- Source 및 Target XML 파일들이 준비되어 있어야 함
- Amazon Q Chat이 설치되고 사용 가능해야 함
- sqlTransformReport.md 프롬프트 파일이 존재해야 함

## 다음 단계
이 단계의 결과물은 다음 용도로 사용됩니다:
- **프로젝트 관리**: 변환 작업 진행 상황 모니터링
- **품질 관리**: 변환 성공률 및 실패 원인 분석
- **의사결정**: 추가 변환 작업 필요성 판단

## 주요 특징
- **AI 기반 생성**: Amazon Q Chat을 활용한 지능형 보고서 생성
- **시각적 표현**: HTML 형태의 직관적인 보고서 제공
- **종합 분석**: 파일별, SQLID별 상세 변환 현황 제공
- **상태 추적**: Process 상태별 분류를 통한 작업 진행 상황 파악
- **DBMS별 대응**: PostgreSQL/MySQL 등 Target DBMS별 변환 규칙 적용
