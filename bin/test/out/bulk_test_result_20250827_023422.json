{
  "testInfo" : {
    "timestamp" : "2025-08-27 02:34:22",
    "directory" : "/home/ec2-user/workspace/tgt-postgres/src/main/resources/sqlmap/mapper/product/",
    "databaseType" : "POSTGRES",
    "totalTests" : 5,
    "successCount" : 4,
    "failureCount" : 1,
    "successRate" : "80.0"
  },
  "successfulTests" : [ {
    "xmlFile" : "ProductAdvancedMapper.xml",
    "sqlId" : "selectPriceHistoryAnalysis",
    "sqlType" : "SELECT",
    "rowCount" : 760
  }, {
    "xmlFile" : "ProductAdvancedMapper.xml",
    "sqlId" : "selectProductLifecycleAnalysis",
    "sqlType" : "SELECT",
    "rowCount" : 760
  }, {
    "xmlFile" : "ProductAdvancedMapper.xml",
    "sqlId" : "selectInventoryForecastAnalysis",
    "sqlType" : "SELECT",
    "rowCount" : 1300
  }, {
    "xmlFile" : "ProductMapper.xml",
    "sqlId" : "selectProductRecommendations",
    "sqlType" : "SELECT",
    "rowCount" : 1
  } ],
  "failedTests" : [ {
    "xmlFile" : "ProductMapper.xml",
    "sqlId" : "selectCategoryHierarchy",
    "sqlType" : "SELECT",
    "errorMessage" : "\n### Error querying database.  Cause: org.postgresql.util.PSQLException: ERROR: recursive query \"category_hierarchy\" column 6 has type character varying(255) in non-recursive term but type character varying overall\n  Hint: Cast the output of the non-recursive term to the correct type.\n  Position: 290\n### The error may exist in file:///tmp/mapper-4387642784378931727.xml\n### The error may involve defaultParameterMap\n### The error occurred while setting parameters\n### SQL: WITH RECURSIVE category_hierarchy AS (             -- 루트 카테고리 (PARENT_CATEGORY_ID IS NULL)             SELECT                  CATEGORY_ID,                 PARENT_CATEGORY_ID,                 CATEGORY_NAME,                 DESCRIPTION,                 1 as CATEGORY_LEVEL,                 CATEGORY_NAME as CATEGORY_PATH,                 CATEGORY_NAME as ROOT_CATEGORY,                 SORT_ORDER,                 IS_ACTIVE             FROM CATEGORIES              WHERE PARENT_CATEGORY_ID IS NULL                          UNION ALL                          -- 하위 카테고리들 (재귀)             SELECT                  c.CATEGORY_ID,                 c.PARENT_CATEGORY_ID,                 c.CATEGORY_NAME,                 c.DESCRIPTION,                 ch.CATEGORY_LEVEL + 1,                 ch.CATEGORY_PATH || ' > ' || c.CATEGORY_NAME,                 ch.ROOT_CATEGORY,                 c.SORT_ORDER,                 c.IS_ACTIVE             FROM CATEGORIES c             JOIN category_hierarchy ch ON c.PARENT_CATEGORY_ID = ch.CATEGORY_ID         ),         category_with_leaf AS (             SELECT                  ch.*,                 CASE                      WHEN EXISTS (SELECT 1 FROM CATEGORIES WHERE PARENT_CATEGORY_ID = ch.CATEGORY_ID)                      THEN 0 ELSE 1                  END as IS_LEAF             FROM category_hierarchy ch         )         SELECT              CATEGORY_ID,             PARENT_CATEGORY_ID,             CATEGORY_NAME,             DESCRIPTION,             CATEGORY_LEVEL,             CATEGORY_PATH,             ROOT_CATEGORY,             IS_LEAF,             (SELECT COUNT(*) FROM PRODUCTS p WHERE p.CATEGORY_ID = cwl.CATEGORY_ID) as PRODUCT_COUNT,             (SELECT COUNT(*)               FROM PRODUCTS p               WHERE p.CATEGORY_ID IN (                 WITH RECURSIVE subcategories AS (                     SELECT CATEGORY_ID FROM CATEGORIES WHERE CATEGORY_ID = cwl.CATEGORY_ID                     UNION ALL                     SELECT c.CATEGORY_ID                      FROM CATEGORIES c                      JOIN subcategories sc ON c.PARENT_CATEGORY_ID = sc.CATEGORY_ID                 )                 SELECT CATEGORY_ID FROM subcategories              )) as TOTAL_PRODUCT_COUNT_INCLUDING_SUBCATEGORIES,             SORT_ORDER,             IS_ACTIVE         FROM category_with_leaf cwl         ORDER BY CATEGORY_LEVEL, SORT_ORDER, CATEGORY_NAME\n### Cause: org.postgresql.util.PSQLException: ERROR: recursive query \"category_hierarchy\" column 6 has type character varying(255) in non-recursive term but type character varying overall\n  Hint: Cast the output of the non-recursive term to the correct type.\n  Position: 290"
  } ],
  "fileStatistics" : [ {
    "fileName" : "ProductMapper.xml",
    "totalTests" : 2,
    "successCount" : 1,
    "failureCount" : 1,
    "successRate" : "50.0"
  }, {
    "fileName" : "ProductAdvancedMapper.xml",
    "totalTests" : 3,
    "successCount" : 3,
    "failureCount" : 0,
    "successRate" : "100.0"
  } ]
}